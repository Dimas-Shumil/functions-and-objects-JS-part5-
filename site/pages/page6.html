<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="../css/sass.css">
    <title>Функции JS</title>
</head>

<body>
    <header class="header">
        <nav class="header__nav">

            <div class="header__nav-title">
                6. Область видимости и контекст выполнения функций
            </div>

            <ul class="header__nav-ul">
                <li><a href="../../index.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page2.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page3.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page4.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page5.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="#"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page7.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page8.html"><span class="header__nav-ul_link"></span></a></li>
                <li><a href="page9.html"><span class="header__nav-ul_link"></span></a></li>
            </ul>
        </nav>
    </header>
    <hr class="hr">
    </div>

    <div class="main">
        <div class="main__wrapper">

            <div class="main__wrapper-conteiner">

                <p>Напоследок разберём одну из самых важных тем не только в рамках функций, но и во всём языке
                    JavaScript — область видимости.</p>

                <h2>Области видимости</h2>

                <h3>Область видимости (от англ. scope) — это специфический механизм языка JavaScript, который
                    определяет, где и каким образом переменные и функции могут быть доступны в коде. Она определяет, где
                    в коде можно получить доступ к переменной или функции или сослаться на эту функцию.</h3>
                <p>Проще всего область видимости наглядно представлять как область, ограниченную фигурными скобками {}.
                </p>
                <p>В JavaScript существует два типа области видимости: глобальная и локальная.</p>
                <p>Глобальная область видимости относится к переменным и функциям, которые доступны из любой точки кода.
                    В то время как локальная область видимости относится к переменным и функциям, доступным только
                    внутри определённой функции.</p>
                <p>Рассмотрим пример:</p>

                <div class="main__wrapper-box_grey">
                    <p>function foo() {</p>
                    <blockquote>const a = 1;</blockquote>
                    <blockquote>function bar() {</blockquote>
                    <blockquote>
                        <blockquote>const b = 2;</blockquote>
                        <blockquote>console.log(a + b);</blockquote>
                    </blockquote>
                    <blockquote>}</blockquote>
                    <blockquote>bar();</blockquote>
                    <p>}</p>
                    <p>foo();//3</p>
                </div>
                <p>И давайте определим на этом примере, где какие области видимости у нас есть.</p>

                <figure>
                    <img src="../images/INTFR_8_6_1 (1).png" width="60%" alt="">
                    <p>Представление областей видимости.</p>
                </figure>

                <p>Итак, у любой программы есть глобальная область видимости.</p>
                <h3>Глобальная область видимости (global scope) в JavaScript — это область видимости, которая
                    распространяется на всю программу и доступна из любой части кода. В ней определены глобальные
                    переменные и функции, которые могут быть использованы в любой части программы.</h3>
                <p>Глобальные переменные и функции объявляются вне всех функций и блоков кода. Они могут быть определены
                    как явно, например, с помощью ключевого слова var или let вне функций, так и неявно, например, путём
                    присваивания значения переменной без её объявления. С точки зрения кода, глобальная область
                    видимости выражается при помощи глобального объекта window в браузере или global в Node.js.</p>
                <p>В нашем примере глобальная область видимости содержит в себе всю программу, а именно функцию foo.</p>
                <p>Теперь рассмотрим локальные области видимости.</p>

                <h3>Локальная область видимости (local scope) в JavaScript — это область видимости, которая
                    распространяется только на определённую функцию или блок кода и доступна только внутри этой функции
                    или блока. В этой области видимости могут быть определены локальные переменные и функции, которые не
                    могут быть использованы вне этой области видимости.</h3>
                <p>Локальные переменные и функции объявляются внутри функций или блоков кода с помощью ключевых слов
                    var, let или const. Они могут быть использованы только внутри этой функции или блока кода и не могут
                    быть доступны в других функциях или блоках. Это помогает избежать конфликтов имен и ошибок при
                    работе с переменными и функциями в разных частях программы.</p>
                <p>Когда функция определена, она создаёт новую локальную область видимости. Любые переменные и функции,
                    объявленные в этой функции, доступны только в этой функции и во всех вложенных функциях.</p>
                <p>В нашем примере есть две локальные области видимости — область видимости функции foo и функции bar.
                    Причём область видимости функции bar входит в область видимости функции foo. Это означает, что
                    функция bar может быть использована только внутри функции foo. При попытке вызвать функцию bar в
                    глобальной области видимости рядом с foo повлечёт за собой ошибку ReferenceError: bar is not
                    defined.</p>
                <p>При обращении к переменной или функции в JavaScript, интерпретатор ищет её сначала в текущей
                    локальной области видимости. Затем, если не находит, переходит к внешним областям видимости, пока не
                    найдёт нужный идентификатор или не достигнет глобальной области видимости.</p>
                <p>Важно помнить, что использование глобальных переменных и функций может привести к нежелательным
                    эффектам. Например, к конфликтам имён, перезаписи значений из других частей программы, сложности
                    отладки и тестирования. Поэтому рекомендуем использовать глобальные переменные и функции только при
                    крайней необходимости. А лучше использовать локальные области видимости, чтобы избежать возможных
                    проблем.</p>
                <p>Закрепим это на примере. Модифицируем предыдущий код.</p>

                <div class="main__wrapper-box_grey">
                    <p>const b = 2;</p>
                    <p>const a = 1;</p>
                    <p>function foo() {</p>
                    <blockquote>function bar() {</blockquote>
                    <blockquote>
                        <blockquote>console.log(a + b);</blockquote>
                    </blockquote>
                    <blockquote>}</blockquote>
                    <blockquote>bar();</blockquote>
                    <p>}</p>
                    <p>foo(); // 3</p>
                </div>

                <p>Мы вынесли константы a и b в глобальную область видимости. И в целом наш код почти не изменился за
                    исключением места объявления и инициализации переменных.</p>
                <p>Но тем самым мы забили глобальную область видимости ненужными для неё переменными и увеличили шанс
                    изменения таких переменных.</p>

                <div class="main__wrapper-box-ligtGreen">
                    <p>Если переменная или функция используется только в рамках какой-то одной функции, то лучше
                        объявить и инициализировать её в соответствующей локальной области видимости.</p>
                </div>

                <p>Области видимости создаются не только функциями, но и блоками. И логично именуются блочной областью
                    видимости. Она была введена в стандарте ECMAScript 6 (ES6) и определяет область видимости
                    переменных, которые объявлены с помощью ключевых слов let и const внутри блока кода. Например,
                    внутри блоков if, for, while, switch и т.д.</p>
                <p>У переменных, объявленных с помощью ключевого слова var, есть функциональная или глобальная область
                    видимости. А вот переменные, объявленные с помощью let или const, существуют только в пределах
                    блока, в котором они были определены.</p>

                <div class="main__wrapper-box_blue">
                    <p>var работает не очевидно — поэтому не рекомендуем объявлять с его помощью переменные.</p>
                </div>

                <p>Посмотрим на примере.</p>

                <div class="main__wrapper-box_grey">
                    <p>const a = 42</p>
                    <p>console.log(a) // 42</p>
                    <p>if (a > 21) {</p>
                    <blockquote>const b = 43</blockquote>
                    <blockquote>console.log(a) // 42</blockquote>
                    <blockquote>console.log(b) // 43</blockquote>
                    <p>}</p>
                    <p>console.log(b) // ReferenceError: b is not defined</p>
                </div>

                <p>Как видите, при обращении к переменной b в глобальной области видимости мы получаем ошибку. Так как b
                    создана внутри блока if и поэтому имеет локальную область видимости только внутри блока.</p>

                <div class="main__wrapper-box-ligtGreen">
                    <p>Попробуйте изменить модификатор const у переменной b блока if на var и посмотрите на результат.
                    </p>
                </div>

                <h2>Замыкания</h2>

            </div>
            <!-- кнопки -->
            <div class="main__btn-box">
                <a href="page5.html" class="previous">&laquo; Назад</a>
                <a href="page7.html" class="next">Вперед &raquo;</a>
            </div>
            <div class="main__btn-box-o">
                <a href="page5.html" class="previous round">&#8249;</a>
                <a href="page7.html" class="next round">&#8250;</a>
            </div>
        </div>

        <button onclick="topFunction()" id="myBtn" title="Перейти к началу">вверх</button>

        <script async src="site/script/js.js"></script>

        <!-- &lsaquo;&rsaquo;&lsaquo;/&rsaquo;
             &lsaquo;script&rsaquo;&lsaquo;/script&rsaquo; -->
    </div>
</body>

</html>